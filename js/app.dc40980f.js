(function(e){function t(t){for(var o,s,c=t[0],i=t[1],l=t[2],d=0,m=[];d<c.length;d++)s=c[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&m.push(n[s][0]),n[s]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);u&&u(t);while(m.length)m.shift()();return a.push.apply(a,l||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],o=!0,c=1;c<r.length;c++){var i=r[c];0!==n[i]&&(o=!1)}o&&(a.splice(t--,1),e=s(s.s=r[0]))}return e}var o={},n={app:0},a=[];function s(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=o,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(r,o,function(t){return e[t]}.bind(null,o));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/king-sombra-games-cs/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=i;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var o=r("19b3"),n=r.n(o);n.a},"0536":function(e,t,r){},1:function(e,t){},"19b3":function(e,t,r){},2:function(e,t){},3:function(e,t){},"445f":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("d1e78");var o=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("v-app",{staticClass:"ma-0"},[r("v-container",{staticClass:"main-container text-center",attrs:{fluid:""}},["gameSelected"===e.state||"gameSelection"===e.state?[r("h1",{staticClass:"mt-5"},[e._v("KING SOMBRA GAMES "+e._s(e.selectedGame?" - "+e.selectedGame.toUpperCase():""))]),r("v-row",[r("v-col",{attrs:{cols:"4",offset:"2"}},["gameSelection"===e.state?r("v-card",{staticClass:"choose-game-btn",attrs:{color:"deep-purple darken-4",dark:""},on:{click:function(t){return e.selectGame("snake")}}},[e._v("SNAKE")]):e._e(),"gameSelected"===e.state?r("v-card",{staticClass:"choose-game-btn",attrs:{color:"deep-purple darken-4",dark:""},on:{click:e.openRoom}},[e._v("START")]):e._e()],1),r("v-col",{attrs:{cols:"4"}},["gameSelection"===e.state?r("v-card",{staticClass:"choose-game-btn",attrs:{color:"deep-purple darken-4",dark:""},on:{click:function(t){return e.selectGame("poker")}}},[e._v("POKER")]):e._e(),"gameSelected"===e.state?r("v-card",{staticClass:"choose-game-btn",attrs:{color:"deep-purple darken-4",dark:""},on:{click:e.joinRoom}},[e._v("JOIN")]):e._e()],1)],1)]:e._e(),"roomOpened"===e.state?[e.privateScreen?e._e():r("GameRoom",{attrs:{selectedGame:e.selectedGame,screenId:e.screenId,socket:e.socket},on:{mainScreen:e.roomSelection}}),e.privateScreen?r("Controls",{attrs:{selectedGame:e.selectedGame,screenId:e.screenId,socket:e.socket},on:{mainScreen:e.roomSelection}}):e._e()]:e._e()],2)],1)],1)},a=[],s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"game-room"},[r("v-row",{staticClass:"main-row"},[r("v-col",{attrs:{cols:"12"}},[r("v-card",{staticClass:"main-card"},[r("v-row",{staticClass:"game-room-row"},[r("v-col",{staticClass:"justify-center align-center text-center game-screen",attrs:{cols:"8"}},[r("v-card",{staticClass:"game-card"},[["roomOpened","roomReady","gameCountdown","gameEnded"].includes(e.roomState)?r("div",{staticClass:"waiting-card deep-purple darken-4 white--text"},["roomOpened"===e.roomState?[r("h1",[e._v("WAITING FOR PLAYERS...")]),r("br"),r("p",[e._v("Scan the QR code or use the SCREEN ID to join the game:")]),r("br"),r("img",{attrs:{alt:"QR code",src:e.qrCodeUrl}}),r("br"),e._v(" SCREEN ID: "+e._s(e.screenId)+" "),r("br"),r("br"),r("h3",[e._v("CLICK 'READY' TO JOIN THE NEXT ROUND OF "+e._s(e.selectedGame.toUpperCase()))])]:e._e(),"roomReady"===e.roomState?[r("h3",[e._v("CLICK 'READY' TO JOIN THE NEXT ROUND OF "+e._s(e.selectedGame.toUpperCase()))]),r("v-btn",{staticClass:"mt-5 start-btn",attrs:{large:"",color:"white deep-purple--text"},on:{click:e.startGameCountDown}},[e._v("START GAME")]),r("br"),r("br"),r("br"),r("p",[e._v("Scan the QR code or use the PEER ID to join the game:")]),r("br"),r("img",{attrs:{alt:"QR code",src:e.qrCodeUrl}}),r("br"),e._v(" SCREEN ID: "+e._s(e.screenId)+" ")]:e._e(),"gameCountdown"===e.roomState?[r("h1",[e._v("GAME STARTING IN")]),r("h1",[e._v(e._s(e.countDown))])]:e._e(),"gameEnded"===e.roomState?[r("h1",[e._v("RESULTS:")]),r("v-row",{staticClass:"results-row"},[r("v-list",e._l(e.results,(function(t){return r("v-list-item",{key:t.id},[r("v-list-item-icon",[r("v-icon",{attrs:{color:t.color}},[e._v("person")])],1),r("v-list-item-content",[r("v-list-item-title",[e._v("Player "+e._s(t.id)+" - "+e._s(t.score))])],1)],1)})),1)],1),r("v-btn",{staticClass:"mt-5 start-btn new-game-btn",attrs:{large:"",color:"white deep-purple--text"},on:{click:e.newGame}},[e._v("PLAY AGAIN")])]:e._e()],2):e._e(),"gameStarted"===e.roomState&&"snake"===e.selectedGame?r("Snake",{attrs:{players:e.players.filter((function(e){return"playing"===e.state})),socket:e.socket,ts:e.ts},on:{updateScore:e.updateScore,gameOver:e.gameOver}}):e._e()],1)],1),r("v-col",{staticClass:"align-end",attrs:{cols:"4"}},[r("div",{staticClass:"stats-side"},[r("v-row",[r("h3",[e._v("Players ("+e._s(e.sortedPlayingPlayers.length)+")")])]),r("v-row",[r("v-list",e._l(e.sortedPlayingPlayers,(function(t){return r("v-list-item",{key:t.id},[r("v-list-item-icon",[r("v-icon",{attrs:{color:t.color}},[e._v("person")])],1),r("v-list-item-content",[r("v-list-item-title",[e._v("Player "+e._s(t.id)+" ("+e._s(t.state)+") - "+e._s(t.score))])],1)],1)})),1)],1),r("v-row",[r("h3",[e._v("Viewers ("+e._s(e.players.filter((function(e){return"playing"!==e.state&&"ready"!==e.state})).length)+")")])]),r("v-row",[r("v-list",e._l(e.players.filter((function(e){return"playing"!==e.state&&"ready"!==e.state})),(function(t){return r("v-list-item",{key:t.id},[r("v-list-item-icon",[r("v-icon",{attrs:{color:t.color}},[e._v("person")])],1),r("v-list-item-content",[r("v-list-item-title",[e._v("Player "+e._s(t.id)+" ("+e._s(t.state)+") ")])],1)],1)})),1)],1)],1),"gameStarted"===e.roomState||"gameCountdown"===e.roomState||"gameEnded"===e.roomState?r("div",{staticClass:"qr-code-side"},[r("v-row",{staticClass:"row-100-width"},[r("p",{staticClass:"margin-auto"},[e._v("Scan the QR code to join the game:")])]),r("v-row",{staticClass:"row-100-width"},[r("img",{staticClass:"margin-auto",attrs:{alt:"QR code",src:e.qrCodeUrl}})]),r("v-row",{staticClass:"row-100-width"},[r("p",{staticClass:"margin-auto"},[e._v("SCREEN ID: "+e._s(e.screenId))])])],1):e._e()])],1)],1)],1)],1),r("p",{attrs:{id:"stats"}})],1)},c=[],i=(r("a4d3"),r("4de4"),r("4160"),r("d81d"),r("4e827"),r("e439"),r("dbb4"),r("b64b"),r("d3b7"),r("159b"),r("284c")),l=r("2fa7"),u=(r("a0bc"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{color:"snake-container"}},[e.gameOver?e._e():r("table",{staticClass:"align-center justify-center text-center snake-table",attrs:{cellspacing:"0",cellpadding:"0"}},e._l(e.gridSize,(function(t){return r("tr",{key:t},e._l(e.gridSize,(function(o){return r("td",{key:""+o+t,staticClass:"grid-cell",class:{snake1:e.snakes[0]&&e.snakes[0].active&&e.snakes[0].body.includes(o+" "+t),snake2:e.snakes[1]&&e.snakes[1].active&&e.snakes[1].body.includes(o+" "+t),snake3:e.snakes[2]&&e.snakes[2].active&&e.snakes[2].body.includes(o+" "+t),snake4:e.snakes[3]&&e.snakes[3].active&&e.snakes[3].body.includes(o+" "+t),food:e.food.includes(o+" "+t)}})})),0)})),0)])}),d=[];r("99af"),r("caad"),r("c975"),r("accc"),r("0d03"),r("a9e3"),r("ac1f"),r("2532"),r("5319"),r("1276"),r("04d3");function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(r,!0).forEach((function(t){Object(l["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v={name:"Snake",props:["socket","players","ts"],data:function(){return{gameOver:!1,intervals:[],snakes:[{body:["3 5","3 4","3 3","3 2"],direction:"D",active:!1,color:"#4DB6AC"},{body:["38 35","38 36","38 37","38 38"],direction:"U",active:!1,color:"#64B5F6"},{body:["6 38","5 38","4 38","3 38"],direction:"R",active:!1,color:"#E57373"},{body:["35 3","36 3","37 3","38 3"],direction:"L",active:!1,color:"#FFEE58"}],food:["5 5","15 4"],gridSize:40}},created:function(){var e=this,t=this.players.map((function(e){return e.position}));this.snakes=this.snakes.map((function(e,r){return t.includes(r)?p({},e,{active:!0}):e})),this.activeSnakes.forEach((function(t,r){e.intervals[r]=setInterval((function(){e.moveSnake(r,t.direction)}),100)})),this.placeFood(0),this.placeFood(1),this.socket.on("playerMove",(function(t){if(console.log("playermove",t),"moveSnake"===t.type){console.log("SNAKE MOVE",new Date(e.ts.now()).toISOString().replace(/[A-Z]/g," "));var r=document.querySelector("#stats"),o=document.createElement("div");o.innerHTML="Peer "+t.playerId+new Date(e.ts.now()).toISOString().replace(/[A-Z]/g," "),r.appendChild(o);var n=e.players.filter((function(e){return e.id==t.playerId}))[0],a=e.snakes[n.position].direction;["L","R"].includes(t.direction)?e.snakes[n.position].direction=["U","D"].includes(a)?t.direction:a:["U","D"].includes(t.direction)&&(e.snakes[n.position].direction=["L","R"].includes(a)?t.direction:a)}}))},computed:{activeSnakes:function(){return this.snakes.filter((function(e){return e.active}))}},watch:{activeSnakes:function(){this.activeSnakes.length||this.$emit("gameOver")}},methods:{moveSnake:function(e,t){console.log("s",e,t);var r=Object(i["a"])(this.snakes[e].body);if(console.log("t",r),1===Number(r[0].split(" ")[0])&&"L"===this.snakes[e].direction||Number(r[0].split(" ")[0])===this.gridSize&&"R"===this.snakes[e].direction||1===Number(r[0].split(" ")[1])&&"U"===this.snakes[e].direction||Number(r[0].split(" ")[1])===this.gridSize&&"D"===this.snakes[e].direction||this.isSnakeHit(e,r[0]))return clearInterval(this.intervals[e]),void this.blink(e);this.snakes[e].body[0]=this.moveHead(this.snakes[e].body[0],t),this.snakes[e].body=this.snakes[e].body.map((function(e,t,o){return 0===t?o[0]:r[t-1]})),this.snakes[e].direction=t,this.food.includes(r[0])&&(this.snakes[e].body.push(r[r.length-1]),this.placeFood(this.food.indexOf(r[0])),this.$emit("updateScore",e))},moveHead:function(e,t){var r=e.split(" ");switch(t){case"D":return"".concat(r[0]," ").concat(Number(r[1])+1);case"U":return"".concat(r[0]," ").concat(Number(r[1])-1);case"L":return"".concat(Number(r[0])-1," ").concat(r[1]);case"R":return"".concat(Number(r[0])+1," ").concat(r[1])}},blink:function(e){var t=this,r=document.querySelectorAll(".snake".concat(e+1));r.forEach((function(r){var o=0,n=setInterval((function(){"hidden"===r.style.visibility?(r.style.visibility="visible",2===o++&&(clearInterval(n),t.killSnake(e))):r.style.visibility="hidden"}),300)}))},placeFood:function(e){var t=!1,r=0,o=0;while(!t)r=Math.floor(Math.random()*this.gridSize)+1,o=Math.floor(Math.random()*this.gridSize)+1,t=!0,this.activeSnakes.forEach((function(e){e.body.includes("".concat(r," ").concat(o))&&(t=!1)}));this.food[e]="".concat(r," ").concat(o)},isSnakeHit:function(e,t){var r=!1;return this.activeSnakes.forEach((function(o,n){e!==n&&o.body.includes(t)&&(r=!0)})),r},killSnake:function(e){this.snakes[e].active=!1}}},f=v,h=(r("d65a"),r("2877")),y=Object(h["a"])(f,u,d,!1,null,"27638cea",null),k=y.exports,S=r("96dd");function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(r,!0).forEach((function(t){Object(l["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var w={name:"GameRoom",components:{Snake:k},props:["selectedGame","screenId","socket"],data:function(){return{games:{snake:{defaultScore:0,minPlayers:1,maxPlayers:4},poker:{defaultScore:1e3,minPlayers:1,maxPlayers:10}},playerColors:["#4DB6AC","#E57373","#64B5F6","#FFEE58","#BA68C8","#FFB74D","#4DB6AC","#F06292","#80DEEA","#AED581"],roomState:"roomOpened",players:[],countDown:0,ts:null}},created:function(){var e=this,t=S["create"]({server:this.socket,interval:5e3});t.on("sync",(function(e){console.log("sync "+e)})),t.on("change",(function(e){console.log("changed offset: "+e+" ms")})),t.send=function(t,r,o){return e.socket.emit("timesync",r),Promise.resolve()},this.ts=t,this.socket.on("timesync",(function(e){t.receive(null,e)})),this.socket.on("players",(function(t){console.log("Players",t),e.players=t})),this.socket.on("startGame",(function(){console.log("Start game"),e.startGameCountDown()}))},computed:{qrCodeUrl:function(){if(!this.privateScreen)return"https://api.qrserver.com/v1/create-qr-code/?data=https://stubnovalucia.github.io/king-sombra-games/?game="+this.selectedGame+"%26screenid="+this.screenId+"&size=200x200"},readyPlayers:function(){return this.players.filter((function(e){return"ready"===e.state}))},sortedPlayingPlayers:function(){var e=this.players.filter((function(e){return"playing"===e.state||"ready"===e.state}));return e.sort((function(e,t){return t.score-e.score})),e}},watch:{readyPlayers:function(){this.readyPlayers.length>=this.games[this.selectedGame].minPlayers&&(this.roomState="roomReady",this.socket.emit("roomState",{id:this.screenId,state:this.roomState}))},roomState:function(){this.socket.emit("roomState",{id:this.screenId,state:this.roomState})}},methods:{startGameCountDown:function(){var e=this;this.roomState="gameCountdown",this.countDown=10;var t=setInterval((function(){e.countDown-=1,0===e.countDown&&(clearInterval(t),e.startGame())}),1e3)},startGame:function(){this.players=this.players.map((function(e){return"ready"===e.state?b({},e,{state:"playing"}):e})),this.roomState="gameStarted"},updateScore:function(e){this.players=this.players.map((function(t){return t.position===e?b({},t,{score:t.score+10}):t}))},gameOver:function(){var e=this;this.results=Object(i["a"])(this.sortedPlayingPlayers),this.players=this.players.map((function(t){return b({},t,{color:"#546E7A",state:"connected",score:e.games[e.selectedGame].defaultScore})})),this.roomState="gameEnded"},newGame:function(){this.roomState="roomOpened"}}},O=w,_=(r("7e1e"),r("6544")),C=r.n(_),I=r("8336"),R=r("b0af"),E=r("62ad"),P=r("132d"),j=r("8860"),D=r("da13"),F=r("5d23"),G=r("34c3"),A=r("0fd9"),N=Object(h["a"])(O,s,c,!1,null,null,null),q=N.exports;C()(N,{VBtn:I["a"],VCard:R["a"],VCol:E["a"],VIcon:P["a"],VList:j["a"],VListItem:D["a"],VListItemContent:F["a"],VListItemIcon:G["a"],VListItemTitle:F["b"],VRow:A["a"]});var T=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"controls"},[e.roomFull?r("v-card",{staticClass:"player-btn red darken-4 white--text",attrs:{dark:""}},[e._v(" WAIT FOR A FREE SPOT ")]):["gameStarted"!==e.roomState&&"gameCountdown"!==e.roomState?["connected"===e.playerState?r("v-card",{staticClass:"player-btn deep-purple darken-4 white--text",attrs:{dark:""},on:{click:e.playerReady}},[e._v(" READY ")]):e._e(),"ready"===e.playerState&&"roomReady"===e.roomState?r("v-card",{staticClass:"player-btn deep-purple darken-4 white--text",attrs:{dark:""},on:{click:e.playerStartGame}},[e._v(" START GAME ")]):e._e(),"ready"===e.playerState&&"roomOpened"===e.roomState?r("v-card",{staticClass:"player-btn  deep-purple darken-4 white--text",attrs:{dark:""}},[e._v(" WAITING FOR OTHER PLAYERS... ")]):e._e()]:e._e(),"gameStarted"===e.roomState||"gameCountdown"===e.roomState?["playing"!==e.playerState&&"ready"!==e.playerState?r("v-card",{staticClass:"player-btn red darken-4 white--text",attrs:{dark:""}},[e._v(" WAIT FOR ANOTHER ROUND ")]):e._e(),"playing"===e.playerState||"ready"===e.playerState?["snake"===e.selectedGame?r("SnakeControls",{attrs:{playerColor:e.playerColor},on:{moveSnake:e.playerMove}}):e._e()]:e._e()]:e._e()],r("p",{attrs:{id:"stats"}})],2)},x=[],M=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-row",{staticClass:"main-row"},[r("v-col",{staticClass:"main-col",attrs:{cols:"12"}},[r("v-row",{staticClass:"row-100",attrs:{justify:"center"}},[r("v-col",{attrs:{cols:"4",justify:"center"}},[r("v-card",{staticClass:"control-card side-control",attrs:{color:e.playerColor},on:{click:function(t){return e.moveSnake("L")}}},[r("v-icon",[e._v(" keyboard_arrow_left ")])],1)],1),r("v-col",{attrs:{cols:"4"}},[r("v-row",{staticClass:"row-50"},[r("v-card",{staticClass:"control-card middle-control",attrs:{color:e.playerColor},on:{click:function(t){return e.moveSnake("U")}}},[r("v-icon",[e._v(" keyboard_arrow_up ")])],1)],1),r("v-row",{staticClass:"row-50 mt-2"},[r("v-card",{staticClass:"control-card middle-control",attrs:{color:e.playerColor},on:{click:function(t){return e.moveSnake("D")}}},[r("v-icon",[e._v(" keyboard_arrow_down ")])],1)],1)],1),r("v-col",{attrs:{cols:"4"}},[r("v-card",{staticClass:"control-card side-control",attrs:{color:e.playerColor},on:{click:function(t){return e.moveSnake("R")}}},[r("v-icon",[e._v(" keyboard_arrow_right ")])],1)],1)],1)],1)],1)},V=[],L={name:"SnakeControls",props:["playerColor"],data:function(){return{}},methods:{moveSnake:function(e){console.log("ms"),this.$emit("moveSnake",{type:"moveSnake",direction:e})}}},U=L,$=(r("c9ae"),Object(h["a"])(U,M,V,!1,null,null,null)),z=$.exports;function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(r,!0).forEach((function(t){Object(l["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}C()($,{VCard:R["a"],VCol:E["a"],VIcon:P["a"],VRow:A["a"]});var K={name:"Controls",components:{SnakeControls:z},props:["selectedGame","screenId","socket"],data:function(){return{playerId:null,playerState:"connecting",roomState:"",roomFull:!1,playerColor:"#FFFFFF",publicScreenId:"",ts:null}},created:function(){var e=this;this.screenId?(this.publicScreenId=this.screenId,this.joinRoom()):(this.publicScreenId=prompt("Please enter the screen's peer ID:"),this.joinRoom());var t=S["create"]({server:this.socket,interval:5e3});t.on("sync",(function(e){console.log("sync "+e)})),t.on("change",(function(e){console.log("changed offset: "+e+" ms")})),t.send=function(t,r,o){return e.socket.emit("timesync",r),Promise.resolve()},this.ts=t,this.socket.on("timesync",(function(e){t.receive(null,e)})),this.socket.on("roomState",(function(t){console.log("roomState",t),e.roomState=t})),this.socket.on("noSuchRoom",(function(){console.log("No room with such ID."),e.$emit("mainScreen")})),this.socket.on("roomFull",(function(){console.log("Room full"),e.roomFull=!0})),this.socket.on("playerState",(function(t){console.log("Player state: ",t),e.playerState=t})),this.socket.on("playerId",(function(t){console.log("Player id: ",t),e.playerId=t})),this.socket.on("playerInfo",(function(t){console.log("Player: ",t),e.playerColor=t.color}))},methods:{playerMove:function(e){console.log("SNAKE MOVE",new Date(this.ts.now()).toISOString().replace(/[A-Z]/g," "));var t=document.querySelector("#stats"),r=document.createElement("div");r.innerHTML="Peer "+this.playerId+new Date(this.ts.now()).toISOString().replace(/[A-Z]/g," "),t.appendChild(r),this.socket.emit("playerMove",B({},e,{playerId:this.playerId,screenId:this.screenId}))},playerReady:function(){this.socket.emit("playerState",{id:this.playerId,screenId:this.screenId,state:"ready"})},playerStartGame:function(){this.socket.emit("startGame",this.screenId)},joinRoom:function(){this.socket.emit("joinRoom",this.publicScreenId)},fullscreenMode:function(){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():elem.webkitRequestFullscreen?e.webkitRequestFullscreen():elem.msRequestFullscreen&&e.msRequestFullscreen(),screen.orientation.lock("landscape-primary")}}},Q=K,Y=(r("69a9"),Object(h["a"])(Q,T,x,!1,null,null,null)),J=Y.exports;C()(Y,{VCard:R["a"]});var W=r("8055"),Z=r.n(W),X={name:"app",components:{GameRoom:q,Controls:J},data:function(){return{selectedGame:"",privateScreen:!1,screenId:"",state:"gameSelection",socket:null}},created:function(){var e=this;this.$route.query.game&&this.$route.query.screenid&&(this.state="roomOpened",this.selectedGame=this.$route.query.game,this.screenId=this.$route.query.screenid,this.privateScreen=!0),this.socket=Z()("178.128.194.208:80"),this.socket.on("connected",(function(t){console.log(t),e.socket.emit("reply",{my:"data"})})),this.socket.on("roomOpened",(function(t){e.screenId=t,e.state="roomOpened",console.log(t)}))},methods:{selectGame:function(e){this.selectedGame=e,this.state="gameSelected"},openRoom:function(){this.socket.emit("openRoom","snake"),this.fullscreenMode()},joinRoom:function(){this.state="roomOpened",this.privateScreen=!0},roomSelection:function(){this.state="gameSelected",this.privateScreen=!1},fullscreenMode:function(){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():elem.webkitRequestFullscreen?e.webkitRequestFullscreen():elem.msRequestFullscreen&&e.msRequestFullscreen()}}},ee=X,te=(r("034f"),r("7496")),re=r("a523"),oe=Object(h["a"])(ee,n,a,!1,null,null,null),ne=oe.exports;C()(oe,{VApp:te["a"],VCard:R["a"],VCol:E["a"],VContainer:re["a"],VRow:A["a"]});var ae=r("f309");o["a"].use(ae["a"]);var se=new ae["a"]({}),ce=r("8c4f");o["a"].use(ce["a"]);var ie=[],le=new ce["a"]({mode:"history",routes:ie}),ue=le;o["a"].config.productionTip=!1,new o["a"]({vuetify:se,router:ue,icons:{iconfont:"md"},render:function(e){return e(ne)}}).$mount("#app")},"5e11":function(e,t){function r(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id="5e11"},"69a9":function(e,t,r){"use strict";var o=r("445f"),n=r.n(o);n.a},"7e1e":function(e,t,r){"use strict";var o=r("f5c4"),n=r.n(o);n.a},ac1fd:function(e,t,r){},c9ae:function(e,t,r){"use strict";var o=r("ac1fd"),n=r.n(o);n.a},d65a:function(e,t,r){"use strict";var o=r("0536"),n=r.n(o);n.a},f5c4:function(e,t,r){}});
//# sourceMappingURL=app.dc40980f.js.map